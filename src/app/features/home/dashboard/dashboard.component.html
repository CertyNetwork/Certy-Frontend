
<div class="tw-flex tw-flex-no-wrap tw-overflow-scroll">
  <!-- <app-side-bar></app-side-bar> -->
  <div class="tw-container tw-mx-auto tw-py-10 tw-h-full lg:tw-w-4/5 tw-w-11/12 tw-px-6">
    <div class="tw-w-full tw-h-full tw-rounded">
      <h1 class="tw-font-bold tw-text-xl tw-mb-5">Overview</h1>
      
      <div class="tw-mt-4" *ngIf="categories$ | async as categories; else loading">
        <!-- <p-toolbar>
          <div class="p-toolbar-group-left">
            <span class="p-input-icon-left">
              <i class="pi pi-search"></i>
              <input type="text" pInputText placeholder="Search category"/>
            </span>
          </div>
          <div class="p-toolbar-group-right">
            <button icon="pi pi-list" [ngClass]="{'p-button-primary': layout ==='list', 'p-button-secondary': layout !=='list'}" class="p-button-rounded p-button-text p-button-sm" pButton (click)="changeViewLayout('list')"></button>
            <button icon="pi pi-th-large" [ngClass]="{'p-button-primary': layout ==='grid', 'p-button-secondary': layout !=='grid'}" class="p-button-rounded p-button-text p-button-sm" pButton (click)="changeViewLayout('grid')"></button>
          </div>
        </p-toolbar> -->
        <p-dataView [value]="categories" [rows]="10" filterBy="name" [layout]="layout">
          <ng-template pTemplate="header">
            <div class="flex flex-column md:flex-row md:justify-content-between">
              <span class="p-input-icon-left">
                <i class="pi pi-search"></i>
                <input type="text" pInputText placeholder="Search category" [(ngModel)]="filterText" (ngModelChange)="onFilterChange()"/>
              </span>
              <div class="ml-auto">
                <button icon="pi pi-plus" pButton class="mr-3 p-button-rounded p-button-sm" (click)="newCategory()"></button>
                <button icon="pi pi-list" [ngClass]="{'p-button-primary': layout ==='list', 'p-button-secondary': layout !=='list'}" class="mr-3 p-button-rounded p-button-text p-button-sm" pButton (click)="changeViewLayout('list')"></button>
                <button icon="pi pi-th-large" [ngClass]="{'p-button-primary': layout ==='grid', 'p-button-secondary': layout !=='grid'}" class="p-button-rounded p-button-text p-button-sm" pButton (click)="changeViewLayout('grid')"></button>
              </div>
            </div>
          </ng-template>
          <ng-template let-cat pTemplate="listItem">
            <div class="col-12">
              <div class="cert-list-item tw-flex tw-flex-col lg:tw-flex-row tw-items-center">
                <img src="{{cat.id | categoryCover | async}}" imgFallback class="tw-object-cover tw-rounded tw-h-48" [alt]="cat.title"/>
                <div class="product-list-detail tw-ml-6">
                  <div class="product-name tw-font-bold">{{cat.title}}</div>
                  <div class="product-description tw-mt-3">{{cat.description}}</div>
                  <div class="product-description tw-mt-6">
                    <i class="pi pi-clock"></i>
                    <span class="tw-ml-2 tw-font-light">{{cat.created_at | date:'MMM d, y'}} at {{ cat.created_at | date:'h:mm a'}}</span>
                  </div>
                </div>
                <div class="product-list-action lg:tw-ml-auto tw-flex tw-flex-row tw-mt-4 lg:tw-mt-0">
                  <button pButton routerLink="/bulk-create/{{cat.id}}" class="p-button-primary" label="Bulk Mint"></button>
                  <div class="tw-w-4 tw-h-4"></div>
                  <button pButton routerLink="/create/{{cat.id}}" class="p-button-outlined" label="Mint NFT"></button>
                </div>
              </div>
            </div>
          </ng-template>
          <ng-template let-cat pTemplate="gridItem">
            <div class="col-12 md:col-6 lg:col-4">
              <div class="product-grid-item card">
                <p-card>
                  <ng-template pTemplate="subtitle">
                    <div class="tw-flex tw-justify-end tw-items-center">
                      <button icon="pi pi-ellipsis-h" pButton class="p-button-link border-none p-button-rounded" (click)="categoryMenu.toggle($event)"></button>
                      <p-overlayPanel #categoryMenu>
                      <ng-template pTemplate>
                        <div class="tw-flex tw-flex-col">
                          <a routerLink="/create/{{cat.id}}" class="tw-pb-3 tw-cursor-pointer hover:tw-bg-blend-darken">Mint NFT</a>
                          <a routerLink="/bulk-create/{{cat.id}}" class="tw-pt-3 tw-cursor-pointer hover:tw-bg-blend-darken">Bulk Mint</a>
                        </div>
                      </ng-template>
                    </p-overlayPanel>
                    </div>
                  </ng-template>
                  <div class="product-grid-item-content">
                    <img src="{{cat.id | categoryCover | async}}" imgFallback class="tw-object-cover tw-h-48 tw-rounded" [alt]="cat.title"/>
                    <div class="product-name tw-font-medium tw-mt-3">{{cat.title}}</div>
                    <div class="product-description tw-font-normal tw-mt-3">{{cat.description}}</div>
                  </div>
                  <ng-template pTemplate="footer">
                    <div class="product-description">
                      <i class="pi pi-clock"></i>
                      <span class="tw-ml-2 tw-font-light">{{cat.created_at | date:'MMM d, y'}} at {{ cat.created_at | date:'h:mm a'}}</span>
                    </div>
                  </ng-template>
                </p-card>
              </div>
            </div>
          </ng-template>
        </p-dataView>
      </div>

      <ng-template #loading>
        <p-dataView [value]="[null, null, null, null, null]" [rows]="10" [layout]="'grid'">
          <ng-template let-cat pTemplate="gridItem">
            <div class="col-12 md:col-6 lg:col-4">
              <div class="product-grid-item card">
                <div class="custom-skeleton p-4">
                  <p-skeleton width="100%" height="150px"></p-skeleton>
                  <div class="mt-3">
                    <p-skeleton width="15rem"></p-skeleton>
                    <p-skeleton  width="10rem" styleClass="mt-3"></p-skeleton>
                  </div>
                </div>
              </div>
            </div>
          </ng-template>
        </p-dataView>
      </ng-template>
    </div>
  </div>
</div>